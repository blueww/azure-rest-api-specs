{  
   "parameters":{  
      "api-version":"2017-12-01",
      "subscriptionId":"subid",
      "resourceGroupName":"rg1",
      "secureGatewayName":"securegw",
      "secureGatewayParameters":{  
         "tags":{  
            "key1":"value1"
         },
         "properties":{  
            "sku":{  
               "name":"Standard_Small",
               "tier":"Standard",
               "capacity":"1"
            },
            "virtualHub":{  
               "id":"/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/virtualHubs/virtualHub1"
            },
            "applicationRuleCollections":[  
               {  
                  "priority":1,
                  "rules":[  
                     {  
                        "name":"rule1",
                        "description":"Deny inbound rule",
                        "priority":1,
                        "direction":"Inbound",
                        "protocols":[  
                           {  
                              "protocol":"https",
                              "port":443
                           }
                        ],
                        "targetUrls":[  
                           "www.test.com"
                        ],
                        "actions":[  
                           {  
                              "actionType":"deny"
                           }
                        ]
                     }
                  ]
               }
            ],
            "networkRuleCollections":[  
               {  
                  "priority":1,
                  "rules":[  
                     {  
                        "name":"D-NAT-web-traffic",
                        "description":"D-NAT all outbound web traffic for inspection",
                        "priority":1,
                        "sourceIps":[  
                           "192.168.1.1-192.168.1.12",
                           "10.1.4.12-10.1.4.255"
                        ],
                        "sourcePorts":[  
                           "*"
                        ],
                        "destinationPorts":[  
                           "443-444",
                           "8443"
                        ],
                        "destinationIps":[  
                           "*"
                        ],
                        "direction":"Outbound",
                        "protocols":[  
                           "tcp"
                        ]
                     }
                  ]
               }
            ]
         }
      }
   },
   "responses":{  
      "200":{  
         "body":{  
            "name":"securegw",
            "id":"/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/secureGateways/securegw",
            "type":"Microsoft.Network/secureGateways",
            "etag":"w/\\00000000-0000-0000-0000-000000000000\\",
            "location":"West US",
            "tags":{  
               "key1":"value1"
            },
            "properties":{  
               "provisioningState":"Succeeded",
               "sku":{  
                  "name":"Standard_Small",
                  "tier":"Standard",
                  "capacity":"1"
               },
               "virtualHub":{  
                  "id":"/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/virtualHubs/virtualHub1"
               },
               "applicationRuleCollections":[  
                  {  
                     "name":"default",
                     "id":"/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/secureGateways/securegw/applicationRuleCollections/default",
                     "etag":"w/\\00000000-0000-0000-0000-000000000000\\",
                     "properties":{  
                        "provisioningState":"Succeeded",
                        "rules":[  
                           {  
                              "name":"default-rule-block-all-urls",
                              "description":"Default rule to block all urls",
                              "priority":65535,
                              "direction":"Outbound",
                              "protocols":[  
                                 {  
                                    "protocol":"http",
                                    "port":80
                                 },
                                 {  
                                    "protocol":"https",
                                    "port":443
                                 }
                              ],
                              "targetUrls":[  
                                 "*"
                              ],
                              "actions":[  
                                 {  
                                    "actionType":"deny"
                                 }
                              ]
                           }
                        ]
                     }
                  },
                  {  
                     "name":"rulecoll",
                     "id":"/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/secureGateways/securegw/applicationRuleCollections/rulecoll",
                     "etag":"w/\\00000000-0000-0000-0000-000000000001\\",
                     "properties":{  
                        "provisioningState":"Succeeded",
                        "priority":1,
                        "rules":[  
                           {  
                              "name":"rule1",
                              "description":"Deny inbound rule",
                              "priority":1,
                              "direction":"Inbound",
                              "protocols":[  
                                 {  
                                    "protocol":"https",
                                    "port":443
                                 }
                              ],
                              "targetUrls":[  
                                 "www.test.com"
                              ],
                              "actions":[  
                                 {  
                                    "actionType":"deny"
                                 }
                              ]
                           }
                        ]
                     }
                  }
               ],
               "networkRuleCollections":[  
                  {  
                     "name":"default",
                     "id":"/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/secureGateways/securegw/networkRuleCollections/default",
                     "etag":"w/\\00000000-0000-0000-0000-000000000000\\",
                     "properties":{  
                        "provisioningState":"Succeeded",
                        "rules":[  
                           {  
                              "name":"default-deny-all-traffic",
                              "description":"Default rule to block all other traffic",
                              "priority":65535,
                              "sourceIps":[  
                                 "*"
                              ],
                              "sourcePorts":[  
                                 "*"
                              ],
                              "destinationPorts":[  
                                 "*"
                              ],
                              "destinationIps":[  
                                 "*"
                              ],
                              "direction":"Outbound",
                              "protocols":[  
                                 "Any"
                              ],
                              "actions":[  
                                 {  
                                    "actionType":"deny"
                                 }
                              ]
                           }
                        ]
                     }
                  },
                  {  
                     "name":"rulecoll",
                     "id":"/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/secureGateways/securegw/networkRuleCollections/rulecoll",
                     "etag":"w/\\00000000-0000-0000-0000-000000000000\\",
                     "properties":{  
                        "provisioningState":"Succeeded",
                        "priority":1,
                        "rules":[  
                           {  
                              "name":"D-NAT-web-traffic",
                              "description":"D-NAT all outbound web traffic for inspection",
                              "priority":1,
                              "sourceIps":[  
                                 "192.168.1.1-192.168.1.12",
                                 "10.1.4.12-10.1.4.255"
                              ],
                              "sourcePorts":[  
                                 "*"
                              ],
                              "destinationPorts":[  
                                 "443-444",
                                 "8443"
                              ],
                              "destinationIps":[  
                                 "*"
                              ],
                              "direction":"Outbound",
                              "protocols":[  
                                 "tcp"
                              ]
                           }
                        ]
                     }
                  }
               ]
            }
         }
      },
      "201":{  
         "body":{  
            "name":"securegw",
            "id":"/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/secureGateways/securegw",
            "type":"Microsoft.Network/secureGateways",
            "etag":"w/\\00000000-0000-0000-0000-000000000000\\",
            "location":"West US",
            "tags":{  
               "key1":"value1"
            },
            "properties":{  
               "provisioningState":"Succeeded",
               "sku":{  
                  "name":"Standard_Small",
                  "tier":"Standard",
                  "capacity":"1"
               },
               "virtualHub":{  
                  "id":"/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/virtualHubs/virtualHub1"
               },
               "applicationRuleCollections":[  
                  {  
                     "name":"default",
                     "id":"/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/secureGateways/securegw/applicationRuleCollections/default",
                     "etag":"w/\\00000000-0000-0000-0000-000000000000\\",
                     "properties":{  
                        "provisioningState":"Succeeded",
                        "rules":[  
                           {  
                              "name":"default-rule-block-all-urls",
                              "description":"Default rule to block all urls",
                              "priority":65535,
                              "direction":"Outbound",
                              "protocols":[  
                                 {  
                                    "protocol":"http",
                                    "port":80
                                 },
                                 {  
                                    "protocol":"https",
                                    "port":443
                                 }
                              ],
                              "targetUrls":[  
                                 "*"
                              ],
                              "actions":[  
                                 {  
                                    "actionType":"deny"
                                 }
                              ]
                           }
                        ]
                     }
                  },
                  {  
                     "name":"rulecoll",
                     "id":"/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/secureGateways/securegw/applicationRuleCollections/rulecoll",
                     "etag":"w/\\00000000-0000-0000-0000-000000000001\\",
                     "properties":{  
                        "provisioningState":"Succeeded",
                        "priority":1,
                        "rules":[  
                           {  
                              "name":"rule1",
                              "description":"Deny inbound rule",
                              "priority":1,
                              "direction":"Inbound",
                              "protocols":[  
                                 {  
                                    "protocol":"https",
                                    "port":443
                                 }
                              ],
                              "targetUrls":[  
                                 "www.test.com"
                              ],
                              "actions":[  
                                 {  
                                    "actionType":"deny"
                                 }
                              ]
                           }
                        ]
                     }
                  }
               ],
               "networkRuleCollections":[  
                  {  
                     "name":"default",
                     "id":"/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/secureGateways/securegw/networkRuleCollections/default",
                     "etag":"w/\\00000000-0000-0000-0000-000000000000\\",
                     "properties":{  
                        "provisioningState":"Succeeded",
                        "rules":[  
                           {  
                              "name":"default-deny-all-traffic",
                              "description":"Default rule to block all other traffic",
                              "priority":65535,
                              "sourceIps":[  
                                 "*"
                              ],
                              "sourcePorts":[  
                                 "*"
                              ],
                              "destinationPorts":[  
                                 "*"
                              ],
                              "destinationIps":[  
                                 "*"
                              ],
                              "direction":"Outbound",
                              "protocols":[  
                                 "Any"
                              ],
                              "actions":[  
                                 {  
                                    "actionType":"deny"
                                 }
                              ]
                           }
                        ]
                     }
                  },
                  {  
                     "name":"rulecoll",
                     "id":"/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Network/secureGateways/securegw/networkRuleCollections/rulecoll",
                     "etag":"w/\\00000000-0000-0000-0000-000000000000\\",
                     "properties":{  
                        "provisioningState":"Succeeded",
                        "priority":1,
                        "rules":[  
                           {  
                              "name":"D-NAT-web-traffic",
                              "description":"D-NAT all outbound web traffic for inspection",
                              "priority":1,
                              "sourceIps":[  
                                 "192.168.1.1-192.168.1.12",
                                 "10.1.4.12-10.1.4.255"
                              ],
                              "sourcePorts":[  
                                 "*"
                              ],
                              "destinationPorts":[  
                                 "443-444",
                                 "8443"
                              ],
                              "destinationIps":[  
                                 "*"
                              ],
                              "direction":"Outbound",
                              "protocols":[  
                                 "tcp"
                              ]
                           }
                        ]
                     }
                  }
               ]
            }
         }
      }
   }
}